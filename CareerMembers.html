<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Members Hub - Career Solutions for Today</title>
    <link rel="stylesheet" href="site.css">
    <style>
        body.career-members-page {
            color: #0f172a;
        }

        .members-hero {
            position: relative;
            color: #fff;
            text-align: center;
            padding: 60px 20px 40px;
            max-width: 1050px;
            margin: 0 auto;
        }

        .members-hero::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 28px;
            background: linear-gradient(120deg, rgba(3, 7, 18, 0.85), rgba(14, 116, 144, 0.85));
            -webkit-backdrop-filter: blur(12px);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.3);
            box-shadow: 0 25px 80px rgba(2, 6, 23, 0.55);
        }

        .members-hero > * {
            position: relative;
            z-index: 1;
        }

        .members-hero h1 {
            font-size: clamp(2.5rem, 5vw, 3.8rem);
            margin-bottom: 16px;
        }

        .members-hero p {
            font-size: 1.15rem;
            max-width: 620px;
            margin: 0 auto 24px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.95);
        }

        .members-badges {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
        }

        .members-badge {
            background: rgba(255, 255, 255, 0.18);
            border: 1px solid rgba(255, 255, 255, 0.35);
            border-radius: 999px;
            padding: 10px 18px;
            font-weight: 600;
            letter-spacing: 0.04em;
            color: #fff;
        }

        .members-panel {
            max-width: 1200px;
            margin: -20px auto 80px;
            padding: 48px 28px 70px;
            background: rgba(255, 255, 255, 0.88);
            border-radius: 26px;
            box-shadow: 0 30px 80px rgba(15, 23, 42, 0.2);
            border: 1px solid rgba(226, 232, 240, 0.6);
        }

        .panel-header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 18px;
            justify-content: space-between;
        }

        .panel-header h2 {
            margin: 0;
            font-size: 2rem;
            color: #0f172a;
        }

        .panel-header p {
            margin: 0;
            color: #475569;
        }

        .members-search-row {
            margin-top: 28px;
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
            align-items: center;
        }

        .members-search-input {
            flex: 1 1 320px;
            position: relative;
        }

        .members-search-input input {
            width: 100%;
            padding: 16px 20px;
            border-radius: 14px;
            border: 1px solid rgba(15, 23, 42, 0.15);
            font-size: 1rem;
            background: #fff;
            color: #0f172a;
        }

        .members-search-input input:focus {
            outline: 3px solid rgba(59, 130, 246, 0.35);
            border-color: rgba(59, 130, 246, 0.6);
        }

        .resource-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #475569;
            font-size: 0.95rem;
        }

        .resource-reset {
            border: 1px solid rgba(15, 23, 42, 0.18);
            background: transparent;
            color: #0f172a;
            padding: 10px 18px;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
        }

        .resource-grid {
            margin-top: 36px;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .resource-group {
            width: 100%;
            border: 1px solid rgba(15, 23, 42, 0.08);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
            overflow: hidden;
        }

        .resource-group summary {
            list-style: none;
            cursor: pointer;
            padding: 26px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 14px;
            background: rgba(248, 250, 252, 0.9);
            border-bottom: 1px solid rgba(148, 163, 184, 0.3);
        }

        .resource-group-heading {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .resource-group-icon {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.06);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6px;
            border: 1px solid rgba(148, 163, 184, 0.35);
        }

        .resource-group-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .resource-group summary::-webkit-details-marker {
            display: none;
        }

        .resource-group summary h3 {
            margin: 0;
            font-size: 1.3rem;
            color: #0f172a;
        }

        .resource-group summary span {
            color: #64748b;
            font-weight: 600;
        }

        .resource-group[open] summary {
            background: rgba(248, 250, 252, 1);
        }

        .resource-group-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 22px;
            padding: 28px 32px 32px;
        }

        .resource-card {
            --resource-accent: #334155;
            --resource-accent-weak: rgba(51, 65, 85, 0.12);
            border: 1px solid rgba(15, 23, 42, 0.08);
            border-radius: 18px;
            background: #fff;
            box-shadow: 0 12px 28px rgba(15, 23, 42, 0.1);
            padding: 24px;
            display: grid;
            grid-template-columns: minmax(0, 1fr);
            gap: 18px;
        }

        .resource-card-header {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .resource-card-header h4 {
            margin: 0;
            font-size: 1.2rem;
            color: #0f172a;
        }

        .resource-body-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .resource-chip {
            align-self: flex-start;
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.03em;
            background: var(--resource-accent-weak);
            color: var(--resource-accent);
            border: 1px solid rgba(15, 23, 42, 0.05);
        }

        .resource-card p {
            margin: 0;
            color: #475569;
            line-height: 1.5;
        }


        .resource-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 18px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--resource-accent), var(--resource-accent));
            color: #fff;
            font-weight: 600;
            text-decoration: none;
            border: none;
            transition: box-shadow 0.2s ease;
            align-self: flex-start;
        }

        .resource-link:hover {
            box-shadow: 0 15px 30px rgba(15, 23, 42, 0.18);
        }

        .resource-thumb {
            width: 100%;
            height: 150px;
            border-radius: 14px;
            overflow: hidden;
            background: #f1f5f9;
            border: 1px solid rgba(148, 163, 184, 0.3);
            position: relative;
        }

        .resource-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.25s ease;
        }

        @media (hover: hover) and (pointer: fine) {
            .resource-card:hover .resource-thumb img {
                transform: scale(1.07);
            }
        }

        /* Hover preview must remain fixed bottom-right; only update if legacy behavior is preserved. */
        .resource-preview {
            position: fixed;
            right: 28px;
            bottom: 28px;
            width: min(420px, 90vw);
            max-height: 80vh;
            background: rgba(15, 23, 42, 0.96);
            color: #f8fafc;
            padding: 18px;
            border-radius: 24px;
            box-shadow: 0 25px 60px rgba(15, 23, 42, 0.45);
            opacity: 0;
            pointer-events: none;
            transform: translateY(12px) scale(0.96);
            transition: opacity 0.25s ease, transform 0.25s ease;
            z-index: 999;
        }

        .resource-preview.is-visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0) scale(1);
        }

        .resource-preview-thumb {
            width: 100%;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(148, 163, 184, 0.35);
            margin-bottom: 14px;
        }

        .resource-preview-thumb img {
            width: 100%;
            display: block;
            object-fit: cover;
        }

        .resource-preview-title {
            margin: 0 0 6px;
            font-size: 1.1rem;
        }

        .resource-preview-desc {
            margin: 0 0 12px;
            font-size: 0.9rem;
            color: rgba(248, 250, 252, 0.85);
        }

        .resource-preview-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 999px;
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: #0f172a;
            font-weight: 600;
            text-decoration: none;
        }

        .resource-preview-close {
            position: absolute;
            top: 12px;
            right: 12px;
            border: none;
            background: rgba(15, 23, 42, 0.6);
            color: #f8fafc;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
        }

        @media (max-width: 720px) {
            .resource-preview {
                left: 16px;
                right: 16px;
                bottom: 16px;
                width: auto;
            }
        }

        .resource-card.theme-excel {
            --resource-accent: #15803d;
            --resource-accent-weak: rgba(21, 128, 61, 0.12);
        }

        .resource-card.theme-finance {
            --resource-accent: #0f9eb9;
            --resource-accent-weak: rgba(15, 158, 185, 0.12);
        }

        .resource-card.theme-powerpoint {
            --resource-accent: #d97706;
            --resource-accent-weak: rgba(217, 119, 6, 0.12);
        }

        .resource-card.theme-word {
            --resource-accent: #2563eb;
            --resource-accent-weak: rgba(37, 99, 235, 0.12);
        }

        .resource-card.theme-tools {
            --resource-accent: #0ea5e9;
            --resource-accent-weak: rgba(14, 165, 233, 0.12);
        }

        .resource-empty {
            width: 100%;
            text-align: center;
            padding: 40px;
            border: 2px dashed rgba(148, 163, 184, 0.55);
            border-radius: 20px;
            color: #475569;
            background: rgba(248, 250, 252, 0.8);
        }

        .members-note {
            margin-top: 50px;
            text-align: center;
            color: #475569;
            font-size: 0.95rem;
        }

        .members-note a {
            color: #0ea5e9;
            font-weight: 600;
            text-decoration: none;
        }

        .members-note a:hover {
            text-decoration: underline;
        }

        @media (max-width: 720px) {
            .members-panel {
                margin: 20px auto 50px;
                padding: 28px 18px 40px;
            }

            .panel-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .members-hero {
                padding: 50px 16px 40px;
            }
        }

        @media (min-width: 820px) {
            .resource-body {
                grid-template-columns: 1fr 220px;
                align-items: start;
            }
        }

        @media (max-width: 540px) {
            .members-hero {
                padding: 70px 14px 50px;
            }

            .resource-group summary {
                padding: 20px 22px;
            }

            .resource-group-cards {
                padding: 22px;
            }
        }
    </style>
</head>
<body class="career-members-page">
    <nav class="navbar">
        <div class="nav-logo">Career Solutions for Today</div>
        <ul class="nav-links" id="navLinks">
            <li><a href="index.html">Home</a></li>
            <li><a href="Learn.html">Learning Resources</a></li>
            <li class="dropdown" id="toolsDropdown">
                <span class="dropdown-toggle" id="toolsToggle">Tools</span>
                <ul class="dropdown-menu" id="toolsDropdownMenu">
                    <li><a href="businesscase.html" target="_blank">Business Case Calculator</a></li>
                    <li><a href="amortization.html" target="_blank">Amortization Calculator</a></li>
                    <li><a href="Signature Builder.html" target="_blank">Email Signature Builder</a></li>
                    <li><a href="Excel.html" target="_blank">Excel Simulations</a></li>
                    <li><a href="shortcuts.html" target="_blank">Shortcuts</a></li>
                </ul>
            </li>
            <li><a href="practice.html">Practice</a></li>
            <li><a href="codeplayground.html">Code Playground</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="contact-form.html">Contact Me</a></li>
            <li><a href="AboutMe.html">About Me</a></li>
        </ul>
        <div class="hamburger" onclick="document.querySelector('.nav-links').classList.toggle('active')">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </nav>

    <section class="members-hero visible">
        <h1>Career Members Hub</h1>
        <p>Quiet landing zone for clients who already know what they need. No fluff, just the files and tools we actually use.</p>
        <div class="members-badges">
            <span class="members-badge">Excel &amp; Finance</span>
            <span class="members-badge">Templates</span>
            <span class="members-badge">Simulations</span>
        </div>
    </section>

    <div data-supabase-config data-supabase-url="" data-supabase-anon-key="" data-supabase-redirect="/CareerMembers.html" hidden></div>

    <main class="members-panel">
        <div class="panel-header">
            <div>
                <h2>Featured resources</h2>
                <p>Same stack we walk through on calls and in workshops.</p>
            </div>
            <div class="resource-meta">
                <span id="resourceCount">Loading…</span>
                <button type="button" class="resource-reset" id="resourceResetButton">Reset</button>
            </div>
        </div>

        <div class="members-search-row" aria-label="Resource search">
            <div class="members-search-input">
                <input type="search" id="resourceSearch" placeholder="Search by tool, template, or file name">
            </div>
        </div>

        <div class="resource-grid" id="resourceList" data-empty-message="Nothing matches yet. Ping me and I’ll add it."></div>

        <div class="resource-preview" id="resourcePreview" aria-hidden="true">
            <button type="button" class="resource-preview-close" aria-label="Close preview">×</button>
            <div class="resource-preview-thumb">
                <img src="" alt="Resource preview" id="resourcePreviewImage">
            </div>
            <h4 class="resource-preview-title" id="resourcePreviewTitle"></h4>
            <p class="resource-preview-desc" id="resourcePreviewDesc"></p>
            <a class="resource-preview-link" id="resourcePreviewLink" href="#" target="_blank" rel="noopener">Open Resource</a>
        </div>

        <p class="members-note">Need a private link added? Reply to your onboarding email and it will land here. Got a resource idea? <a href="contact-form.html">Contact me</a> and I’ll add it to the queue.</p>
    </main>

    <script src="js/backgrounds.js"></script>
    <script>
        (function(){
            var resources = [
                {
                    id: 'excel-simulations',
                    title: 'Excel Simulations Library',
                    program: 'Excel',
                    description: 'These are simulations I created on using the Excel application.',
                    link: 'Excel.html',
                    linkLabel: 'Open Excel Simulations',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/98d03107b6b4a62657bec5b372ba43f4a7e772ad/Thumbnails/ExcelSimulationContentThumb.png',
                    theme: 'excel',
                    category: 'Excel Simulations'
                },
                {
                    id: 'business-case-calculator',
                    title: 'Business Case Calculator',
                    program: 'Finance',
                    description: 'Estimate ROI, payback period, and key metrics for your proposals or portfolio updates.',
                    link: 'businesscase.html',
                    linkLabel: 'Go to Calculator',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/80a5a5f74d2b90da4d854cd88705bd8fcddfb4d4/Thumbnails/businesscase.png',
                    theme: 'finance',
                    category: 'Calculators'
                },
                {
                    id: 'email-signature-builder',
                    title: 'Custom Email Signature Generator',
                    program: 'Tools',
                    description: 'Spin up branded Outlook/Gmail signatures with copy-ready HTML blocks and quick styling controls.',
                    link: 'Signature Builder.html',
                    linkLabel: 'Launch Signature Builder',
                    thumbnail: 'icons/outlook.svg',
                    theme: 'tools',
                    category: 'Tools'
                },
                {
                    id: 'professional-bio-template',
                    title: 'Professional Bio Template',
                    program: 'PowerPoint',
                    description: 'This is a professional bio template you can download and fill out for your needs.',
                    link: 'https://docs.google.com/presentation/d/1N4Y0_lHoGTOLTuVEqnRUeGGwD190aB2P/export/pptx',
                    linkLabel: 'Download Bio Template',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/d4a5c2c46650f1e958e1a38996ea4216181edddf/Thumbnails/biotemplatethumb.png',
                    theme: 'powerpoint',
                    category: 'Resume Templates'
                },
                {
                    id: 'classic-resume-template',
                    title: 'Classic Resume Template',
                    program: 'Word',
                    description: 'Fillable classic resume template with sections including skills, education, and more.',
                    link: 'https://docs.google.com/document/d/10qH5epMz5GTIDCll2VBeHhtUhKlRCx4I/export?format=docx',
                    linkLabel: 'Download Classic Template',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/d97222d8f6cc3918f38eae975d176c6776eb4e5b/Thumbnails/classicres.png',
                    theme: 'word',
                    category: 'Resume Templates'
                },
                {
                    id: 'modern-resume-template',
                    title: 'Modern Resume Template',
                    program: 'PowerPoint',
                    description: 'Fillable modern resume template with sections including skills, education, and more.',
                    link: 'https://docs.google.com/presentation/d/1q56RDcpNKYnM69j6ElT9LfV04faAcRDu/export?format=pptx',
                    linkLabel: 'Download Modern Template',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/43b55f504d147fe575506b0ad439d4b363b3613c/Thumbnail%20-%20Modern%20Resume%20Template.png',
                    theme: 'powerpoint',
                    category: 'Resume Templates'
                },
                {
                    id: 'modern-resume-template-photo',
                    title: 'Modern Resume Template with Photo',
                    program: 'PowerPoint',
                    description: 'PowerPoint resume layout with a featured photo slot plus customizable sections for role highlights.',
                    link: 'https://docs.google.com/presentation/d/1hnGjNDEAXbPqIY6b_9niedbhqE8wJFdG/export?format=pptx',
                    linkLabel: 'Download Photo Template',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/6bcca2d9951dd2fa2acfdd7037e3da74f59f025f/Thumbnail%20-%20Modern%20Resume%20Template%20with%20Photo.png',
                    theme: 'powerpoint',
                    category: 'Resume Templates'
                },
                {
                    id: 'powerpoint-circular-template',
                    title: 'Professional Circular PowerPoint Template',
                    program: 'PowerPoint',
                    description: 'Ready-to-edit circular slide layout featured in the walkthrough video for polished status updates.',
                    link: 'https://docs.google.com/presentation/d/1jEpHrXmaGz_sYMaLKYMPkzHK00sAzzJH/export/pptx',
                    linkLabel: 'Download Circular Template',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/61672e2cd29118b2e06f897862fc43f4dfd9c5c0/Thumbnails/circthumb.png',
                    theme: 'powerpoint',
                    category: 'PowerPoint Templates'
                },
                {
                    id: 'interactive-morph-template',
                    title: 'Interactive Morph Template',
                    program: 'PowerPoint',
                    description: 'Advanced morph-based deck with pre-built transitions for product launches and workshops.',
                    link: 'https://docs.google.com/presentation/d/1eYWlgIPVrBVg6EhInnT5UvaBN7AfluXw/export/pptx',
                    linkLabel: 'Download Morph Template',
                    thumbnail: 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/08fa67a3d2a47ba58a95097a62d3140c44c3d032/Thumbnails/interactivemorphtemp9.22.png',
                    theme: 'powerpoint',
                    category: 'PowerPoint Templates'
                },
                {
                    id: 'powerpoint-title-slide-rounded',
                    title: 'PowerPoint Title Slide Template | Rounded Rectangles',
                    program: 'PowerPoint',
                    
                    description: 'Quick tutorial on building a rounded-rectangle hero slide—great for exec-ready openers.',
                    link: 'https://youtu.be/BGA1xlTZiLg',
                    linkLabel: 'Watch Template Tutorial',
                    thumbnail: 'https://i.ytimg.com/vi/BGA1xlTZiLg/hqdefault.jpg',
                    theme: 'powerpoint',
                    category: 'PowerPoint Templates'
                },
                {
                    id: 'powerpoint-title-slide-angled',
                    title: 'PowerPoint Title Slide Template | Angled Bars',
                    program: 'PowerPoint',
                    description: 'Step-by-step for an angled-bars hero slide that matches modern enterprise decks.',
                    link: 'https://youtu.be/ygKXwybo6HI',
                    linkLabel: 'Watch Template Tutorial',
                    thumbnail: 'https://i.ytimg.com/vi/ygKXwybo6HI/hqdefault.jpg',
                    theme: 'powerpoint',
                    category: 'PowerPoint Templates'
                }
            ];

            var categoryOrder = ['PowerPoint Templates', 'Resume Templates', 'Excel Simulations', 'Calculators', 'Tools'];
            var categoryIcons = {
                'PowerPoint Templates': 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/eb1a77e95198fe476e3a2c8c4276b8954ed509ad/icons/2025%20PowerPoint%20Icon.png',
                'Resume Templates': 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/eb1a77e95198fe476e3a2c8c4276b8954ed509ad/icons/Resume%20Icon%20Last%20Version.png',
                'Excel Simulations': 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/eb1a77e95198fe476e3a2c8c4276b8954ed509ad/icons/2025%20Excel%20Icon.png',
                'Calculators': 'icons/Google Sheets Icon 2025.png',
                'Tools': 'https://raw.githubusercontent.com/StevenMKay/CareerSolutionsForToday/5f8ca1128564dfeefedce392377c72338ce5197c/icons/Tools%20Icon.png'
            };
            var categoryIconAlt = {
                'PowerPoint Templates': 'PowerPoint icon',
                'Resume Templates': 'Resume icon',
                'Excel Simulations': 'Excel icon',
                'Calculators': 'Calculator icon',
                'Tools': 'Email tools icon'
            };

            var listEl = document.getElementById('resourceList');
            var searchInput = document.getElementById('resourceSearch');
            var countEl = document.getElementById('resourceCount');
            var resetButton = document.getElementById('resourceResetButton');
            var previewEl = document.getElementById('resourcePreview');
            var previewImg = document.getElementById('resourcePreviewImage');
            var previewTitle = document.getElementById('resourcePreviewTitle');
            var previewDesc = document.getElementById('resourcePreviewDesc');
            var previewLink = document.getElementById('resourcePreviewLink');
            var previewClose = previewEl ? previewEl.querySelector('.resource-preview-close') : null;
            var previewHideTimer = null;
            var touchMatcher = window.matchMedia('(hover: none)');
            if (!listEl || !searchInput || !countEl) {
                return;
            }

            function createResourceNode(resource) {
                var card = document.createElement('div');
                var classes = ['resource-card'];
                if (resource.theme) {
                    classes.push('theme-' + resource.theme);
                }
                card.className = classes.join(' ');

                var header = document.createElement('div');
                header.className = 'resource-card-header';

                var chip = document.createElement('span');
                chip.className = 'resource-chip';
                chip.textContent = resource.program;

                var title = document.createElement('h4');
                title.textContent = resource.title;

                header.appendChild(chip);
                header.appendChild(title);

                var info = document.createElement('div');
                info.className = 'resource-body-info';

                var desc = document.createElement('p');
                desc.textContent = resource.description;

                info.appendChild(desc);

                var thumb = document.createElement('div');
                thumb.className = 'resource-thumb';
                thumb.dataset.previewSrc = resource.thumbnail || '';
                thumb.dataset.previewTitle = resource.title || '';
                thumb.dataset.previewDesc = resource.description || '';
                thumb.dataset.previewLink = resource.link || '#';
                thumb.dataset.previewLabel = resource.linkLabel || 'Open Resource';
                var img = document.createElement('img');
                img.src = resource.thumbnail;
                img.alt = resource.title + ' preview';
                thumb.appendChild(img);

                var link = document.createElement('a');
                link.className = 'resource-link';
                link.href = resource.link;
                link.target = '_blank';
                link.rel = 'noopener';
                link.textContent = resource.linkLabel;

                card.appendChild(header);
                card.appendChild(info);
                card.appendChild(thumb);
                card.appendChild(link);

                return card;
            }

            // Hover preview logic is legacy-critical—keep this fixed-panel behavior unless fully replacing it.
            function showPreviewFromThumb(thumb) {
                if (!previewEl || !thumb) return;
                clearTimeout(previewHideTimer);
                var thumbImg = thumb.querySelector('img');
                var src = thumb.dataset.previewSrc || (thumbImg ? thumbImg.src : '');
                var title = thumb.dataset.previewTitle || '';
                var desc = thumb.dataset.previewDesc || '';
                var link = thumb.dataset.previewLink || '#';
                var label = thumb.dataset.previewLabel || 'Open Resource';

                if (previewImg) {
                    previewImg.src = src;
                    previewImg.alt = title + ' preview';
                }
                if (previewTitle) {
                    previewTitle.textContent = title;
                }
                if (previewDesc) {
                    previewDesc.textContent = desc;
                }
                if (previewLink) {
                    previewLink.href = link;
                    previewLink.textContent = label;
                }

                previewEl.classList.add('is-visible');
                previewEl.setAttribute('aria-hidden', 'false');
            }

            function hidePreview(delay) {
                if (!previewEl) return;
                clearTimeout(previewHideTimer);
                var handler = function(){
                    previewEl.classList.remove('is-visible');
                    previewEl.setAttribute('aria-hidden', 'true');
                };
                if (delay) {
                    previewHideTimer = setTimeout(handler, delay);
                } else {
                    handler();
                }
            }

            function wireThumbnailPreview() {
                var thumbs = listEl.querySelectorAll('.resource-thumb');
                thumbs.forEach(function(thumb){
                    if (thumb.dataset.previewBound === 'true') return;
                    thumb.dataset.previewBound = 'true';

                    thumb.addEventListener('mouseenter', function(){
                        if (!touchMatcher.matches) {
                            showPreviewFromThumb(thumb);
                        }
                    });

                    thumb.addEventListener('mouseleave', function(){
                        if (!touchMatcher.matches) {
                            hidePreview(200);
                        }
                    });

                    thumb.addEventListener('click', function(evt){
                        if (touchMatcher.matches) {
                            evt.preventDefault();
                            var thumbImg = thumb.querySelector('img');
                            var targetSrc = thumb.dataset.previewSrc || (thumbImg ? thumbImg.src : '');
                            if (previewEl.classList.contains('is-visible') && previewImg && previewImg.src === targetSrc) {
                                hidePreview();
                            } else {
                                showPreviewFromThumb(thumb);
                            }
                        }
                    });
                });
            }

            function matches(resource, needle) {
                if (!needle) return true;
                var target = [resource.title, resource.program, resource.description]
                    .join(' ')
                    .toLowerCase();
                return target.indexOf(needle) !== -1;
            }

            function render(filterText) {
                listEl.innerHTML = '';
                var query = (filterText || '').trim().toLowerCase();
                var filtered = resources.filter(function(item){
                    return matches(item, query);
                });

                if (countEl) {
                    countEl.textContent = filtered.length + ' of ' + resources.length + ' resources';
                }

                if (!filtered.length) {
                    var empty = document.createElement('div');
                    empty.className = 'resource-empty';
                    empty.textContent = listEl.dataset.emptyMessage || 'No results found.';
                    listEl.appendChild(empty);
                    return;
                }

                var grouped = filtered.reduce(function(acc, item){
                    var key = item.category || 'Other';
                    if (!acc[key]) {
                        acc[key] = [];
                    }
                    acc[key].push(item);
                    return acc;
                }, {});

                var ordered = categoryOrder.slice();
                Object.keys(grouped).forEach(function(key){
                    if (ordered.indexOf(key) === -1) {
                        ordered.push(key);
                    }
                });

                ordered.forEach(function(key){
                    var items = grouped[key];
                    if (!items || !items.length) {
                        return;
                    }

                    var groupEl = document.createElement('details');
                    groupEl.className = 'resource-group';

                    var summary = document.createElement('summary');
                    var heading = document.createElement('div');
                    heading.className = 'resource-group-heading';
                    var title = document.createElement('h3');
                    title.textContent = key;
                    var iconSrc = categoryIcons[key];
                    if (iconSrc) {
                        var iconWrap = document.createElement('div');
                        iconWrap.className = 'resource-group-icon';
                        var iconImg = document.createElement('img');
                        iconImg.src = iconSrc;
                        iconImg.alt = categoryIconAlt[key] || (key + ' icon');
                        iconWrap.appendChild(iconImg);
                        heading.appendChild(iconWrap);
                    }
                    heading.appendChild(title);
                    var count = document.createElement('span');
                    count.textContent = items.length + ' item' + (items.length > 1 ? 's' : '');
                    summary.appendChild(heading);
                    summary.appendChild(count);
                    groupEl.appendChild(summary);

                    var cards = document.createElement('div');
                    cards.className = 'resource-group-cards';
                    items.forEach(function(resource){
                        cards.appendChild(createResourceNode(resource));
                    });

                    groupEl.appendChild(cards);
                    listEl.appendChild(groupEl);
                });

                wireThumbnailPreview();
            }

            if (previewClose) {
                previewClose.addEventListener('click', function(){
                    hidePreview();
                });
            }

            if (previewEl) {
                previewEl.addEventListener('mouseenter', function(){
                    clearTimeout(previewHideTimer);
                });
                previewEl.addEventListener('mouseleave', function(){
                    if (!touchMatcher.matches) {
                        hidePreview(200);
                    }
                });
            }

            if (touchMatcher && typeof touchMatcher.addEventListener === 'function') {
                touchMatcher.addEventListener('change', function(){
                    hidePreview();
                });
            }

            document.addEventListener('keyup', function(evt){
                if (evt.key === 'Escape') {
                    hidePreview();
                }
            });

            searchInput.addEventListener('input', function(){
                render(searchInput.value);
            });

            if (resetButton) {
                resetButton.addEventListener('click', function(){
                    searchInput.value = '';
                    render('');
                    searchInput.focus();
                });
            }

            render('');
        })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js" defer></script>
    <script src="js/auth.js" defer></script>
    <script src="js/navAuth.js" defer></script>
    <script src="js/universalSidebar.js" defer></script>
</body>
</html>
