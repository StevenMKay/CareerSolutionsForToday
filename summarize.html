<!doctype html> <!-- HTML5 document declaration -->
<html lang="en"> <!-- Set document language -->
<head> <!-- Head: metadata + styles -->
  <meta charset="utf-8" /> <!-- Character encoding -->
  <meta name="viewport" content="width=device-width,initial-scale=1" /> <!-- Responsive scaling -->

  <title>Summarize This Data</title> <!-- Browser tab title -->

  <link rel="stylesheet" href="site.css"> <!-- Optional: reuse your site styling (safe even if not needed) -->

  <style> /* Minimal professional styling (kept simple for tutorial clarity) */
    :root { --border:#d0d7de; --text:#111827; --muted:#6b7280; --bg:#ffffff; --panel:#f7f7f8; --btn:#0d6efd; } /* Basic theme tokens */
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: var(--text); background: var(--bg); margin: 0; } /* Page baseline */
    .container { max-width: 920px; margin: 48px auto; padding: 0 16px; } /* Center layout */
    .card { border: 1px solid var(--border); border-radius: 14px; padding: 18px; background: var(--bg); } /* Simple card container */
    h1 { margin: 0 0 8px 0; font-size: 28px; } /* Title styling */
    p { margin: 0 0 14px 0; color: var(--muted); line-height: 1.4; } /* Subtitle styling */
    label { display:block; font-weight: 600; margin-bottom: 8px; } /* Label styling */
    textarea { width: 100%; min-height: 240px; padding: 12px; border: 1px solid var(--border); border-radius: 12px; font-size: 14px; line-height: 1.4; } /* Textarea styling */
    .actions { display:flex; gap: 10px; align-items:center; flex-wrap: wrap; margin-top: 12px; } /* Button row */
    button { border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px; font-weight: 600; cursor: pointer; background: #fff; } /* Button base */
    button.primary { background: var(--btn); color: #fff; border-color: var(--btn); } /* Primary button */
    button:disabled { opacity: 0.6; cursor: not-allowed; } /* Disabled state */
    .status { font-size: 13px; color: var(--muted); } /* Status text */
    .output { margin-top: 16px; padding: 14px; background: var(--panel); border: 1px solid var(--border); border-radius: 12px; white-space: pre-wrap; } /* Output panel */
    .hint { margin-top: 10px; font-size: 12px; color: var(--muted); } /* Small helper text */
  </style> <!-- End minimal CSS -->
</head> <!-- End head -->

<body> <!-- Begin body -->
  <div class="container"> <!-- Page wrapper -->
    <div class="card"> <!-- Card layout -->
      <h1>Summarize this data</h1> <!-- Page title -->
      <p>Paste notes, bullet points, or CSV/table-like data. Click summarize to get a simpler explanation and context.</p> <!-- Description -->

      <label for="input">Your data</label> <!-- Input label -->
      <textarea id="input" placeholder="Paste your data here..."></textarea> <!-- Textarea for pasted content -->

      <div class="actions"> <!-- Buttons + status row -->
        <button id="summarizeBtn" class="primary">Summarize</button> <!-- Primary summarize button -->
        <button id="clearBtn">Clear</button> <!-- Clear button -->
        <button id="copyBtn">Copy Output</button> <!-- Copy button -->
        <span id="status" class="status"></span> <!-- Status display -->
      </div> <!-- End actions row -->

      <div id="output" class="output"></div> <!-- Output panel -->

      <div class="hint">Tip: Paste CSV data like "Month,Sales" and it will point out trends and outliers.</div> <!-- Helper tip -->
    </div> <!-- End card -->
  </div> <!-- End container -->

  <script> // Begin JavaScript
    const BACKEND_URL = "https://resume-analyzer-backend-pi.vercel.app/api/summarize"; // Your confirmed Vercel endpoint

    const inputEl = document.getElementById("input"); // Reference to textarea
    const outputEl = document.getElementById("output"); // Reference to output panel
    const statusEl = document.getElementById("status"); // Reference to status text
    const summarizeBtn = document.getElementById("summarizeBtn"); // Reference to summarize button
    const clearBtn = document.getElementById("clearBtn"); // Reference to clear button
    const copyBtn = document.getElementById("copyBtn"); // Reference to copy button

    function setStatus(text) { statusEl.textContent = text; } // Helper to set status text
    function setOutput(text) { outputEl.textContent = text || ""; } // Helper to set output text

    clearBtn.addEventListener("click", () => { // Clear click handler
      inputEl.value = ""; // Clear input
      setOutput(""); // Clear output
      setStatus(""); // Clear status
    }); // End clear handler

    copyBtn.addEventListener("click", async () => { // Copy output click handler
      try { // Try clipboard write
        await navigator.clipboard.writeText(outputEl.textContent || ""); // Copy output text to clipboard
        setStatus("Copied"); // Show copied status
        setTimeout(() => setStatus(""), 1000); // Clear status after 1 second
      } catch { // If clipboard blocked
        setStatus("Copy failed"); // Show failure status
      } // End try/catch
    }); // End copy handler

    summarizeBtn.addEventListener("click", async () => { // Summarize click handler
      const text = inputEl.value.trim(); // Read and trim user input

      if (!text) { setStatus("Paste something first"); return; } // Guard against empty input

      setStatus("Working..."); // Set working status
      setOutput(""); // Clear output before new response
      summarizeBtn.disabled = true; // Disable button while request runs

      try { // Try API call
        const response = await fetch(BACKEND_URL, { // Call your backend endpoint
          method: "POST", // Use POST
          headers: { "Content-Type": "application/json" }, // Send JSON
          body: JSON.stringify({ text }) // Put pasted text into request body
        }); // End fetch

        const data = await response.json(); // Parse response JSON

        if (!response.ok) { throw new Error(data.error || "Request failed"); } // Handle server errors

        setOutput(data.output); // Show the LLM output in the UI
        setStatus("Done"); // Show done status
      } catch (err) { // Catch network/server errors
        setOutput(err.message); // Show error message
        setStatus("Error"); // Show error status
      } finally { // Always cleanup
        summarizeBtn.disabled = false; // Re-enable summarize button
      } // End try/catch/finally
    }); // End summarize handler
  </script> <!-- End JavaScript -->
</body> <!-- End body -->
</html> <!-- End HTML -->
